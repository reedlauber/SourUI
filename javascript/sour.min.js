!function(a){Function.prototype.curry=Function.prototype.curry||function(){var a=this,b=Array.prototype.slice.call(arguments);return function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))}};var b=a.sour={};b.noop=function(){}}(window),function(a){function b(a,b,c){var d=this;d.name=a,d.dependencies=b,d.constructor=c,d.parent=null,d.children=[],d.$elem=null,d.set_elem=function(a){function b(a){return function(){"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,1))}}d.$elem=a,a.parents().each(function(){return $(this).data("sour-ctrl")?(d.parent=$(this).data("sour-ctrl"),d.foo="bar",d.parent.children.push(d),!1):void 0}),a.data("sour-ctrl",d),d.$elem.emit=function(a,b){d.parent&&($(d.parent).trigger(a+"--emit",b),d.parent.$elem.emit(a,b))},d.$elem.broadcast=function(a,b){d.children.forEach(function(c){$(c).trigger(a+"--broadcast",b),c.$elem.broadcast(a,b)})},d.$elem.on=function(a,c){$(d).bind(a+"--emit",b(c)),$(d).bind(a+"--broadcast",b(c))}}}a.__controller=function(c,d,e){if(d){if(c in e)throw new Error("Controller "+c+" already exists.");var f=[],g=a.noop;return d.forEach?d.forEach(function(a){if("string"==typeof a)f.push(a);else if("function"==typeof a)return g=a,!1}):"function"==typeof d&&(g=d),e[c]=new b(c,f,g),a}return e[c]}}(window.sour),function(a){function b(b,d){var e=this,f=a.noop,g={},h={};e.CLASS="Module",e.name=b,e.dependencies=d,e.loaded=!1,e.config=function(a){return"function"==typeof a&&(f=a),e},e.dependency=function(a){var b;return a in h?b=h[a]:e.dependencies.some(function(d){return b=c[d].dependency(a),!!b}),b},e.run=function(){e.loaded||(e.config(),e.dependencies.forEach(function(a){if(!(a in c))throw new Error("Module "+a+" doesn't exist.");c[a].run()}),e.loaded=!0,$(function(){e.$elem=$("[module="+e.name+"]"),e.parse("body"),e.dependency("content_settings").parse($(".js-content").html())}))},e.service=function(b,c){if(b in h)throw new Error("A dependency named "+b+" already exists.");var d=a.__service(b,c),f=[];return d.dependencies.forEach(function(a){"module"===a?f.push(e):f.push(e.dependency(a))}),h[b]=d.constructor.apply(d,f),e},e.controller=function(b,c){return c?(a.__controller(b,c,g),e):g[b]},e.on=function(a,b){$(e).bind(a,b)},e.emit=function(a,b){$(e).trigger(a,b)},e.parse=function(b){a.__parse(b,e)};var i={};e.data=function(a,b){return"undefined"==typeof b?i[a]:(i[a]=b,void 0)}}var c={};a.module=function(a,d){return d=d||[],a in c||(c[a]=new b(a,d)),c[a]}}(window.sour),function(a){a.__parse=function(a,b){var c=$(a,b.$elem),d=c.parent();d.length||(d=c),$("[ctrl], [data-ctrl]",d).each(function(){var a=$(this);if(!a.data("sour-ctrl")){var c=a.attr("ctrl")||a.attr("data-ctrl"),d=b.controller(c);if(d){d.set_elem(a);var e=[];d.dependencies.forEach(function(c){"$elem"===c?e.push(a):"module"===c?e.push(b):e.push(b.dependency(c))}),d.constructor.apply(d,e)}}})}}(window.sour),function(){sour.__service=function(a,b){var c,d=[];return b.forEach?b.forEach(function(a){if("string"==typeof a)d.push(a);else if("function"==typeof a)return c=a,!1}):"function"==typeof b&&(c=b),{name:a,dependencies:d,constructor:c}}}(window.sour);